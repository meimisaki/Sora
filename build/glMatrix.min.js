var vec2={create:function(){var a=new Float32Array(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new Float32Array(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new Float32Array(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},sub:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a},mul:function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a},div:function(a,
b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a},str:function(a){return"("+a[0]+", "+a[1]+")"},fromStr:function(a){var b=new Float32Array(2),c=/\(\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*\)/i;c.test(a)&&(a=c.exec(a),b[0]=parseFloat(a[1]),b[1]=parseFloat(a[2]));return b}},vec3={create:function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new Float32Array(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,c){var d=new Float32Array(3);d[0]=a;d[1]=b;d[2]=
c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},sub:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a},mul:function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a},div:function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a},str:function(a){return"("+a[0]+", "+a[1]+", "+a[2]+")"},fromStr:function(a){var b=
new Float32Array(3),c=/\(\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*\)/i;c.test(a)?(a=c.exec(a),b[0]=parseFloat(a[1]),b[1]=parseFloat(a[2]),b[2]=parseFloat(a[3])):(a=vec2.fromStr(a),b[0]=a[0],b[1]=a[1]);return b}},vec4={create:function(){var a=new Float32Array(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,c,d){var e=new Float32Array(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a},sub:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a},mul:function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a},div:function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a},str:function(a){return"("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},fromStr:function(a){var b=new Float32Array(4),c=/\(\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)\s*\)/i;c.test(a)?(a=c.exec(a),b[0]=parseFloat(a[1]),b[1]=parseFloat(a[2]),b[2]=parseFloat(a[3]),b[3]=parseFloat(a[4])):(a=vec3.fromStr(a),b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b}},mat4={create:function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;
a[14]=0;a[15]=1;return a},clone:function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=
0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=e;a[13]=g;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=
b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],m=b[6],n=b[7],l=b[8],k=b[9],t=b[10],u=b[11],w=b[12],x=b[13],y=b[14],z=b[15],p=c*h-d*g,q=c*m-e*g,r=c*n-f*g,s=d*m-e*h,A=d*n-f*h,B=e*n-f*m,C=l*x-k*w,D=l*y-t*w,E=l*z-u*w,F=k*y-t*x,G=k*z-u*x,H=t*z-u*y,v=p*H-q*G+r*F+s*E-A*D+B*C;if(!v)return null;v=1/v;a[0]=(h*H-m*G+n*F)*v;a[1]=(e*G-d*H-f*F)*v;a[2]=(x*B-y*A+z*s)*v;a[3]=(t*A-k*B-u*s)*v;a[4]=(m*E-g*H-n*D)*v;a[5]=(c*H-e*E+f*D)*v;a[6]=(y*r-w*B-z*q)*v;a[7]=(l*B-t*r+u*q)*v;a[8]=(g*G-h*E+n*C)*v;a[9]=(d*E-c*G-f*C)*v;a[10]=
(w*A-x*r+z*p)*v;a[11]=(k*r-l*A-u*p)*v;a[12]=(h*D-g*F-m*C)*v;a[13]=(c*F-d*D+e*C)*v;a[14]=(x*q-w*s-y*p)*v;a[15]=(l*s-k*q+t*p)*v;return a},mul:function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],l=b[7],k=b[8],t=b[9],u=b[10],w=b[11],x=b[12],y=b[13],z=b[14];b=b[15];var p=c[0],q=c[1],r=c[2],s=c[3];a[0]=p*d+q*h+r*k+s*x;a[1]=p*e+q*m+r*t+s*y;a[2]=p*f+q*n+r*u+s*z;a[3]=p*g+q*l+r*w+s*b;p=c[4];q=c[5];r=c[6];s=c[7];a[4]=p*d+q*h+r*k+s*x;a[5]=p*e+q*m+r*t+s*y;a[6]=p*f+q*n+r*u+s*z;a[7]=p*g+q*l+r*w+
s*b;p=c[8];q=c[9];r=c[10];s=c[11];a[8]=p*d+q*h+r*k+s*x;a[9]=p*e+q*m+r*t+s*y;a[10]=p*f+q*n+r*u+s*z;a[11]=p*g+q*l+r*w+s*b;p=c[12];q=c[13];r=c[14];s=c[15];a[12]=p*d+q*h+r*k+s*x;a[13]=p*e+q*m+r*t+s*y;a[14]=p*f+q*n+r*u+s*z;a[15]=p*g+q*l+r*w+s*b;return a},translate:function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,g,h,m,n,l,k,t,u,w,x,y;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],m=b[3],n=
b[4],l=b[5],k=b[6],t=b[7],u=b[8],w=b[9],x=b[10],y=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=m,a[4]=n,a[5]=l,a[6]=k,a[7]=t,a[8]=u,a[9]=w,a[10]=x,a[11]=y,a[12]=f*d+n*e+u*c+b[12],a[13]=g*d+l*e+w*c+b[13],a[14]=h*d+k*e+x*c+b[14],a[15]=m*d+t*e+y*c+b[15]);return a},scale:function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},
rotateX:function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],m=b[8],n=b[9],l=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+m*d;a[5]=f*c+n*d;a[6]=g*c+l*d;a[7]=h*c+k*d;a[8]=m*c-e*d;a[9]=n*c-f*d;a[10]=l*c-g*d;a[11]=k*c-h*d;return a},rotateY:function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],m=b[8],n=b[9],l=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-m*d;a[1]=f*c-n*d;a[2]=g*c-l*d;a[3]=h*c-k*d;a[8]=e*d+m*c;a[9]=f*d+n*c;a[10]=g*d+l*c;a[11]=h*d+k*c;return a},rotateZ:function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],m=b[4],n=b[5],l=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+m*d;a[1]=f*c+n*d;a[2]=g*c+l*d;a[3]=h*c+k*d;a[4]=m*c-e*d;a[5]=n*c-f*d;a[6]=l*c-g*d;a[7]=k*c-h*d;return a},perspective:function(a,
b,c,d,e){b=1/Math.tan(b/2);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*f;a[15]=0;return a},ortho:function(a,b,c,d,e,f,g){var h=1/(b-c),m=1/(d-e),n=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+c)*h;a[13]=(e+d)*m;a[14]=(g+f)*n;a[15]=1;return a},lookAt:function(a,b,c,d){var e,f,g,h,m,n,l,k,t=b[0],u=b[1];b=b[2];g=d[0];h=d[1];f=d[2];l=c[0];d=c[1];
e=c[2];if(1E-6>Math.abs(t-l)&&1E-6>Math.abs(u-d)&&1E-6>Math.abs(b-e))return mat4.identity(a);c=t-l;d=u-d;l=b-e;k=1/Math.sqrt(c*c+d*d+l*l);c*=k;d*=k;l*=k;e=h*l-f*d;f=f*c-g*l;g=g*d-h*c;(k=Math.sqrt(e*e+f*f+g*g))?(k=1/k,e*=k,f*=k,g*=k):g=f=e=0;h=d*g-l*f;m=l*e-c*g;n=c*f-d*e;(k=Math.sqrt(h*h+m*m+n*n))?(k=1/k,h*=k,m*=k,n*=k):n=m=h=0;a[0]=e;a[1]=h;a[2]=c;a[3]=0;a[4]=f;a[5]=m;a[6]=d;a[7]=0;a[8]=g;a[9]=n;a[10]=l;a[11]=0;a[12]=-(e*t+f*u+g*b);a[13]=-(h*t+m*u+n*b);a[14]=-(c*t+d*u+l*b);a[15]=1;return a},str:function(a){return"("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}};